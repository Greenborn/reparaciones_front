<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-title>
      Registrar Precio
    </ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">

  <ion-grid class="bg1 h-100">
    <ion-row>

      <ion-col size="12" size-sm="6">
        <ion-card class="search_card">
          <ion-card-header>
            <ion-card-title>Información</ion-card-title>
          </ion-card-header>
          <ion-card-content>
            <ion-grid>
              <ion-row>
                <ion-col>
                  <p>En esta pestaña puede cargar un nuevo registro de precio de producto.</p>
                  <p>La carga de productos es importante para mantener la base de datos actualizada.</p><br>

                  <p>Si no encontras un producto, categoría, marca o comercio, escribinos a: <a href="https://www.facebook.com/TandilPreciosBaratos">Tandil Precios Baratos</a></p>
                  <p>El sitio está en desarrollo y si la idea prende o hay interés se continuará agregando funcionalidades.</p>
                  <p>Podes acercar sugerencias, escribiendo a: <a href="https://www.facebook.com/greenborn.software">Greenborn Software</a>, o reportar errores en: <a href="https://clientes.greenborn.com.ar/#/reportar-error/2">Reportar error</a> </p><br>

                  <p>Los campos de Categoría, Sub Categoría, Marca y Sub Marca se usan para filtrar la lista de productos.</p>
                </ion-col>
              </ion-row>
            </ion-grid>
          
          </ion-card-content>
        </ion-card>
      </ion-col>

      <ion-col size="12" size-sm="6">
        <ion-card class="w-100 form-precio">
          <ion-card-header>
            <ion-card-title>Ingresar Precio</ion-card-title>
          </ion-card-header>
        
          <ion-card-content>
            <ion-grid>

              <ion-row>
                <ion-col>
                  <ion-item class="w-100">
                    <ion-label>Comercio</ion-label>
                    <ionic-selectable  item-content
                      [(ngModel)]="precio_form.comercio"
                      [items]="listado_comercios"
                      itemValueField="id"
                      itemTextField="name"
                      [canSearch]="true"
                      (onChange)="comercioChange($event)">
                    </ionic-selectable>
                  </ion-item>
                </ion-col>
                
                <ion-col size="auto">
                  <ion-button (click)="nuevoComercio()" color="secondary"><ion-icon name="add-circle"></ion-icon></ion-button>
                </ion-col>
              </ion-row>

              <ion-row>
                <ion-col>
                  <ion-item class="w-100">
                    <ion-label>Sucursal</ion-label>
                    <ionic-selectable  item-content
                      [(ngModel)]="precio_form.sucursal"
                      [items]="listado_sucursales"
                      itemValueField="id"
                      itemTextField="name"
                      [canSearch]="true"
                      (onChange)="sucursalChange($event)">
                    </ionic-selectable>
                  </ion-item>
                </ion-col>

                <ion-col size="auto">
                  <ion-button (click)="nuevaSucursal()" color="secondary"><ion-icon name="add-circle"></ion-icon></ion-button>
                </ion-col>
              </ion-row>

              <ion-row>
                <ion-col>
                  <ion-item class="w-100">
                    <ion-label>Categoría de Producto</ion-label>
                    <ionic-selectable  item-content
                      [(ngModel)]="precio_form.producto_categoria"
                      [items]="listado_categorias"
                      itemValueField="id"
                      itemTextField="name"
                      [canSearch]="true"
                      (onChange)="categoriaChange($event)">
                    </ionic-selectable>
                  </ion-item>
                </ion-col>

                <ion-col size="auto">
                  <ion-button (click)="nuevaCategoria()" color="secondary"><ion-icon name="add-circle"></ion-icon></ion-button>
                </ion-col>
              </ion-row>

              <ion-row>
                <ion-col>
                  <ion-item class="w-100">
                    <ion-label>Sub Categoría de Producto</ion-label>
                    <ionic-selectable  item-content
                      [(ngModel)]="precio_form.producto_sub_categoria"
                      [items]="listado_sub_categorias"
                      itemValueField="id"
                      itemTextField="name"
                      [canSearch]="true"
                      (onChange)="subCategoriaChange($event)">
                    </ionic-selectable>
                  </ion-item>
                </ion-col>

                <ion-col size="auto">
                  <ion-button (click)="nuevaCategoria()" color="secondary"><ion-icon name="add-circle"></ion-icon></ion-button>
                </ion-col>
              </ion-row>

              <ion-row>
                <ion-col>
                  <ion-item class="w-100">
                    <ion-label>Marca</ion-label>
                    <ionic-selectable  item-content
                      [(ngModel)]="precio_form.marca"
                      [items]="listado_marcas"
                      itemValueField="id"
                      itemTextField="name"
                      [canSearch]="true"
                      (onChange)="marcaChange($event)">
                    </ionic-selectable>
                  </ion-item>
                </ion-col>

                <ion-col size="auto">
                  <ion-button (click)="nuevaMarca()" color="secondary"><ion-icon name="add-circle"></ion-icon></ion-button>
                </ion-col>
              </ion-row>

              <ion-row>
                <ion-col>
                  <ion-item class="w-100">
                    <ion-label>Sub Marca</ion-label>
                    <ionic-selectable  item-content
                      [(ngModel)]="precio_form.sub_marca"
                      [items]="listado_sub_marcas"
                      itemValueField="id"
                      itemTextField="name"
                      [canSearch]="true"
                      (onChange)="subMarcaChange($event)">
                    </ionic-selectable>
                  </ion-item>
                </ion-col>

                <ion-col size="auto">
                  <ion-button (click)="nuevaMarca()" color="secondary"><ion-icon name="add-circle"></ion-icon></ion-button>
                </ion-col>
              </ion-row>

              <ion-row>
                <ion-col>
                  <ion-item class="w-100">
                    <ion-label>Producto</ion-label>
                    <ionic-selectable item-content 
                      [(ngModel)]="precio_form.producto"
                      [items]="listado_productos"
                      itemValueField="id"
                      itemTextField="name"
                      [canSearch]="true"
                      (onChange)="productoChage($event)">
                    </ionic-selectable>
                  </ion-item>
                </ion-col>

                <ion-col size="auto">
                  <ion-button (click)="nuevoProducto()" color="secondary"><ion-icon name="add-circle"></ion-icon></ion-button>
                </ion-col>
              </ion-row>

              <ion-row>
                <ion-item>
                  <ion-label>Fecha:</ion-label>
                  <ion-datetime 
                      displayFormat="DD/MMM/YYYY"
                      monthValues="01,02,03,04,05,06,07,08,09,10,11,12"
                      monthShortNames="ene, feb, mar, abr, may, jun, jul, ago, sep, oct, nov, dic"
                      min="1967"
                      max="{{max_date}}"
                      doneText="Elegir"
                      cancelText="Cancelar"
                     locale="es-AR" [(ngModel)]="precio_form.fecha"></ion-datetime>
                </ion-item>
              </ion-row>

              <ion-row>
                <ion-item>
                  <ion-label>Precio:</ion-label>
                  <ion-input placeholder="149,99" type="text" [(ngModel)]="precio_form.precio"></ion-input>
                </ion-item>
              </ion-row>

              <ion-row>
                <ion-col><ion-button (click)="ingresar()">Ingresar</ion-button></ion-col>
              </ion-row>

            </ion-grid>
          </ion-card-content>
        </ion-card>
      </ion-col>
        
    </ion-row>
  </ion-grid>

</ion-content>
